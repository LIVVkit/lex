Energy_Balance_MERRA2_GIS:
  module: lex/energy/energy.py
  references: [/global/cfs/cdirs/e3sm/livvkit/data/racmo/Noel2015.bib,/global/cfs/cdirs/e3sm/livvkit/data/cism/glissade/cism-glissade.bib,/global/cfs/cdirs/e3sm/livvkit/data/e3sm/Evans2019.bib,
   /global/cfs/cdirs/e3sm/livvkit/data/livvkit.bib]
  meta:
    Case ID: [CASE_ID]
    Climatology years: [1980-2020]
    Model: [E3SM-ELM]
  img_height: 300
  climo: CASE_OUT_DIR/CASE_ID.{clim}_mean.nc
  climo_remap: CASE_OUT_DIR/remap/CASE_ID.{clim}_mean_merra2.nc
  lnd_climo: CASE_OUT_DIR/remap/CASE_ID.ANN_mean_merra2.nc
  glc_surf: CASE_OUT_DIR/remap/CASE_ID.ANN_mean_merra2.nc
  
  latlon: CASE_OUT_DIR/remap/CASE_ID.ANN_mean_merra2.nc
  elevation: CASE_OUT_DIR/remap/CASE_ID.ANN_mean_merra2.nc
  latv: lat
  lonv: lon
  topov: topo
  landfracv: landfrac
  mask_ocean: {model_native: false, model_remap: true, dset_a: true}
  maskv: gis_mask2
  dataset_names: {model_remap: 'ELM [MERRA2 Grid]', model_native: ELM, dset_a: MERRA2}
  aavg_sort: [ELM, 'ELM [MERRA2 Grid]', MERRA2]
  scales: {model: 1, dset_a: 1}
  data_vars:
  - dset_a: tas
    dset_b: TSA
    model: TSA
    title: Surface temperature
    sign: 1
    scales: {dset_a: 1, dset_b: 1, model: 1}
    units: K
  - title: Albedo
    dset_a: [/, rsus, rsds]
    model:
    - /
    - [+, FSRND, FSRVD]
    - [+, FSDSVD, FSDSND]
    sign: 1
    scales: {dset_a: 1, model: 1}
    units: unitless
    cmin: 0.5
    cmax: 0.83
    cmin_d: -0.2
    cmax_d: 0.2
  - dset_a: ['-', rsds, rsus]
    model: FSA
    title: Shortwave net
    comment: ' (Positive to surface)'
    sign: 1
    scales: {dset_a: 1, model: 1}
    units: W m^-2
  - dset_a: rsds
    model: FSDS
    title: Shortwave down
    sign: 1
    scales: {dset_a: 1, model: 1}
    units: W m^-2
  - dset_a: ['-', rlus, rlds]
    model: FIRA
    title: Longwave net
    comment: ' (Positive to atmosphere)'
    sign: 1
    scales: {dset_a: 1, model: 1}
    units: W m^-2
  - dset_a: rlds
    model: FLDS
    title: Longwave down
    sign: 1
    scales: {dset_a: 1, model: 1}
    units: W m^-2
  - dset_a: hfss
    dset_b: FSH
    model: FSH
    title: Sensible heat
    comment: ' (Positive to atmosphere)'
    sign: 1
    scales: {dset_a: 1, dset_b: 1, model: 1}
    units: W m^-2
  - dset_a: hfls
    dset_b: EFLX_LH_TOT
    model: EFLX_LH_TOT
    title: Latent Heat Flux
    comment: ' (Positive to atmosphere)'
    sign: 1
    scales: {dset_a: 1, dset_b: 1, model: 1}
    units: W m^-2
  - title: Net energy balance
    dset_a:
    - '-'
    - ['-', rsds, rsus]
    - - +
      - ['-', rlus, rlds]
      - [+, hfss, hfls]
    model:
    - '-'
    - FSA
    - - +
      - FIRA
      - [+, FSH, EFLX_LH_TOT]
    sign: 1
    scales: {dset_a: 1, dset_b: 1, model: 1}
    units: W m^-2
    cmin: -10
    cmax: 10
    cmap: RdBu_r
  in_dirs: {dset_a: SCRATCH_DIR/lex/data/MERRA2}
  file_patterns: {dset_a: 'MERRA2_{season}_climo.nc'}
  masks: {dset_a: SCRATCH_DIR/lex/data/grids/msk_gis_r025_remap_merra2.traave.20250124.nc,
    model_remap: SCRATCH_DIR/lex/data/grids/msk_gis_r025_remap_merra2.traave.20250124.nc,
    model_native: SCRATCH_DIR/lex/data/grids/msk_gis_rcm_r025.nc}
  desc: Surface energy balance component {component}{comment} from {data_var_names}
  cmap: plasma
  cmap_diff: RdBu_r
